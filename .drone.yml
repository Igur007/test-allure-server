kind: pipeline
name: test 3.10

platform:
  os: linux
  arch: arm64

trigger:
  ref:
    include:
    - refs/heads/main
    - refs/remotes/origin/main
    - refs/pull/**
    - refs/tags/v**

steps:
- name: check style
  image: igur007/py3106allure:latest
  pull: if-not-exists
  commands:
  - pip3 install invoke
  - pip3 install uv
  - inv install-dev
  - . .venv/bin/activate
#  - pre-commit run --all-files
#  - inv check-style

- name: run unit tests
  image: igur007/py3106allure:latest
  pull: if-not-exists
  commands:
  - . .venv/bin/activate
  - inv tests-coverage
  depends_on:
  - check style


