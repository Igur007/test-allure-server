{"name": "test_query_cannot_be_run_when_action_denied_for_registry", "status": "skipped", "statusDetails": {"message": "XFAIL Bug https://neom.atlassian.net/browse/NEOS-3266 [BE] 500 error when user without product:consume permissions tries to list products or run statement (GET powerbi/products, POST powerbi/statement)\n\nAssertionError: Error is expected but is not returned", "trace": "tests/integration/api/consume/powerbi/test_run_query.py:301: in test_query_cannot_be_run_when_action_denied_for_registry\n    assert ApiError.from_response(response) == common_error.insufficient_permissions_error.with_debug_message_args(\nharness/api/model/error/api_error.py:81: in from_response\n    assert response.status_code > 299, \"Error is expected but is not returned\"\nE   AssertionError: Error is expected but is not returned"}, "description": "\n        As a user\n        When I have `product:consume` action denied for registry\n        And I run query\n        Then I get an error response\n        ", "attachments": [{"name": "log", "source": "17a8dda2-30aa-44db-a64a-e011805fe792-attachment.txt", "type": "text/plain"}, {"name": "stdout", "source": "61c10ae4-6c28-4804-aa9a-0c518da9452c-attachment.txt", "type": "text/plain"}], "start": 1698654827579, "stop": 1698654827690, "uuid": "bb18adec-4517-41bb-b03c-d402b49907d1", "historyId": "c57474db1f6bc67a820217a02557b44b", "testCaseId": "c57474db1f6bc67a820217a02557b44b", "fullName": "tests.integration.api.consume.powerbi.test_run_query.TestApiRunQuery#test_query_cannot_be_run_when_action_denied_for_registry", "labels": [{"name": "story", "value": "Query cannot be run when `product:consume` action denied for registry"}, {"name": "feature", "value": "Run query"}, {"name": "parentSuite", "value": "[API] ConsumeQuery"}, {"name": "tag", "value": "@pytest.mark.usefixtures('authenticate_neos_admin', 'create_product_1_v2', 'add_product_1_schema_v2', 'add_rows_to_product_1_table', 'create_data_product_v2', 'add_schema_v2', 'builder_set_product_1_as_input', 'builder_run', 'publish_data_product_v2', 'create_user', 'set_user_policy_type', 'allow_product_consume_action', 'deny_registry_product_consume_action', 'create_user_policy', 'authenticate_as_new_user')"}, {"name": "tag", "value": "@pytest.mark.xfail(reason='Bug https://neom.atlassian.net/browse/NEOS-3266 [BE] 500 error when user without product:consume permissions tries to list products or run statement (GET powerbi/products, POST powerbi/statement)')"}, {"name": "tag", "value": "access"}, {"name": "tag", "value": "negative"}, {"name": "tag", "value": "consume"}, {"name": "suite", "value": "test_run_query"}, {"name": "subSuite", "value": "TestApiRunQuery"}, {"name": "host", "value": "Is-MacBook-Pro.local"}, {"name": "thread", "value": "26202-MainThread"}, {"name": "framework", "value": "pytest"}, {"name": "language", "value": "cpython3"}, {"name": "package", "value": "tests.integration.api.consume.powerbi.test_run_query"}]}